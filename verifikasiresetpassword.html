<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Alfagift</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style/csslogin.css">
</head>
<body>
    <!-- HEADER -->
    <nav class="navbar bg-primary p-4">
        <div class="container-fluid">
            <div class="row w-100">
                <div class="col-12">
                    <!-- Tombol Panah Kembali -->
                    <a href="login.html" class="text-light text-decoration-none mb-3 d-inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                        </svg>
                    </a>
                    
                    <!-- Judul dan Deskripsi -->
                    <div class="header-content">
                        <h4 class="header-title">Reset Password</h4>
                        <p class="header-description mt-2">
                            Masukkan kode verifikasi yang telah dikirim ke nomor Anda
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- FORM RESET PASSWORD -->
    <div class="container card-container r">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <div class="card">
                    <div class="card-body p-4 form-custom">
                        <div class="text-center mb-4">
                            <p class="mb-2">Mohon tunggu kode verifikasi yang dikirim</p>
                            <p class="mb-0 phone-number">via WhatsApp ke 081234567891</p>
                        </div>

                        <!-- Input OTP -->
                        <div class="mb-4">
                            <label class="form-label mb-3">Masukkan Kode Verifikasi</label>
                            <div class="otp-inputs">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric">
                            </div>
                            <div class="text-center">
                                <span class="info-text">Kode berlaku selama <span class="countdown" id="timer">01:59</span></span>
                            </div>
                        </div>

                        <div class="alert text-center mb-4">
                            <p class="mb-0 small">Pastikan E-Mail/Nomor Handphone yang Anda input benar dan terdaftar di Alfagift</p>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <span class="text-muted small">Belum menerima kode?</span>
                            <button class="btn btn-link p-0 countdown" id="resendBtn" disabled>Kirim ulang kode dalam <span id="resendTimer">01:59</span></button>
                        </div>

                        <div class="resend-options mb-4">
                            <button class="btn btn-outline-primary flex-fill">
                                <i class="fab fa-whatsapp me-2"></i>Kirim ulang kode via WhatsApp
                            </button>
                            <button class="btn btn-outline-primary flex-fill">
                                <i class="fas fa-sms me-2"></i>Kirim ulang kode via SMS
                            </button>
                        </div>

                        <div class="divider"></div>

                        <div class="d-grid mb-5">
                            <a href="otpberhasil.html" class="btn btn-primary btn-lg" id="verifyBtn">Verifikasi</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript untuk OTP dan Timer -->
    <script>
        // Timer countdown
        let timeLeft = 119; // 1 menit 59 detik dalam detik
        const timerElement = document.getElementById('timer');
        const resendTimerElement = document.getElementById('resendTimer');
        const resendBtn = document.getElementById('resendBtn');
        
        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            resendTimerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft > 0) {
                timeLeft--;
                setTimeout(updateTimer, 1000);
            } else {
                timerElement.textContent = "00:00";
                resendTimerElement.textContent = "00:00";
                timerElement.classList.remove('countdown');
                timerElement.classList.add('text-muted');
                resendBtn.disabled = false;
                resendBtn.textContent = "Kirim ulang kode";
                resendBtn.classList.remove('countdown');
            }
        }
        
        // Mulai timer saat halaman dimuat
        updateTimer();
        
        // Fungsi untuk input OTP
        const otpInputs = document.querySelectorAll('.otp-input');
        
        otpInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                // Jika input diisi, pindah ke input berikutnya
                if (e.target.value.length === 1) {
                    if (index < otpInputs.length - 1) {
                        otpInputs[index + 1].focus();
                    }
                }
            });
            
            input.addEventListener('keydown', (e) => {
                // Jika tombol backspace ditekan dan input kosong, pindah ke input sebelumnya
                if (e.key === 'Backspace' && e.target.value === '') {
                    if (index > 0) {
                        otpInputs[index - 1].focus();
                    }
                }
            });
            
            // Hanya menerima angka
            input.addEventListener('keypress', (e) => {
                if (!/[0-9]/.test(e.key)) {
                    e.preventDefault();
                }
            });
        });
        
        // Fungsi untuk tombol kirim ulang
        resendBtn.addEventListener('click', function() {
            if (!this.disabled) {
                // Reset timer
                timeLeft = 119;
                updateTimer();
                this.disabled = true;
                this.innerHTML = 'Kirim ulang kode dalam <span id="resendTimer">01:59</span>';
                this.classList.add('countdown');
                
                // Reset OTP inputs
                otpInputs.forEach(input => {
                    input.value = '';
                });
                otpInputs[0].focus();
                
                // Tampilkan pesan sukses (bisa diganti dengan logika pengiriman kode)
                alert('Kode verifikasi telah dikirim ulang!');
            }
        });
    </script>
</body>
</html>